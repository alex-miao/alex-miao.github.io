---
layout: post
title: "An Analysis of KeeperDAO"
date: 2021-01-20
categories: blockchain
tags: [blockchain]
---

The topic of on-chain arbitrage and miner extractable value (MEV), has been of interest to the Ethereum community as of late due to the meteoric rise in decentralized finance protocols. A central issue with the current Ethereum paradigm is that all transactions are broadcasted into the mempool. Among these publicly viewable pending transactions are arbitrages between DEXes and Compound liquidations, akin to if hedge funds were to announce risk-free and profitable trades before executing them. Naturally, there is a strong incentive to front run these trades by publishing a similar transaction with a higher fee, and we are already seeing the emergence of Ethereum frontrunning bots capable of performing complex simulations of incoming Ethereum transactions to find and execute these opportunities[^1]. From multiple bots competing there emerges priority gas auctions (PGAs), the phenomena in which bots try to outbid each other in gas price to gain priority in the mempool[^2]. At best, these fees are rent captured by the miners who collect the high transaction fee, but could potentially be an existential threat to Ethereum itself, compromising layer 1 security. Miners, upon seeing such a high gas price transaction may each try to mine the block for themselves and compete to extend the chain containing their preferred history, which briefly fragments the network and results in a period where the canonical chain is unclear.

A conservative lower bound on the arbitrage value over the lifetime of the major DeFi protocols (essentially a two year period, heavily concentrated in the past year) is around $29 million[^3], with other accounts putting cumulative MEV north of $125 million[^4]. We can only expect to see this number grow as more money goes into DeFi[^5] and new frontrunning opportunities are exploited, from the large, predictable movements of yield farming capital through Yearn to the scheduled asset buys a la the early days of Yam Finance.

[KeeperDAO](https://keeperdao.com/#/) is a protocol that seeks to capture some of this value and quell the MEV issue through coordination of various parties utilizing the blockchain, each with different incentives. Although still in a very early stage, KeeperDAO starts with liquidity providers depositing capital into pools, which can be borrowed by arbitrageurs or “keepers” as flash loans. Keepers share arbitrage profits with other keepers and liquidity providers in the form of ROOK tokens distributed by the protocol, but this cost to the keeper is meant to be offset by reduced transaction fees and profit from the opportunities of other keepers: the protocol coordinates keepers by assigning and updating priorities so to have one keeper execute a transaction per arbitrage, preventing PGAs. This model has shown to be quite promising as there is currently a total of about $180 million[^6] in liquidity being provided in all asset five pools. The protocol has amassed a profit of $11 million[^7] over all pools since the project’s inception, essentially all captured in the few months since mid-November of 2020.

From the perspective of game theory, KeeperDAO has two significant advantages. First, since KeeperDAO has a massive pool of capital and a large number of active keepers running different strategies, bots and arbitrageurs not participating in KeeperDAO and operating alone will not be able to compete, both in terms of latency, gas bidding, and breadth of strategies. Second, given that KeeperDAO is the first protocol to reach adoption in this new category of arbitrage pools, serving as a Schelling point for new arbitrageurs entering the space and makes it difficult for competing liquidity/arbitrage pools to form. Thus, from these two facts it might be reasonable to argue that KeeperDAO is poised to capture this market with winner-take-all dynamics of on-chain arbitrage pools.

The roadmap is also to incorporate DEX traders and those opening CDPs or lending positions in the protocol. Large DEX trades first submitted to KeeperDAO would first have keepers front run them, but profits would be returned to transaction senders, allowing them to capture some of the arbitrage value generated by their trades. Those opening collateralized positions through KeeperDAO would give keepers the right to liquidate the position slightly above the actual liquidation price, but would have some of the liquidated collateral returned, the equivalent to buying cheap tail-risk insurance. In each case, joining KeeperDAO is the dominant strategy versus abstaining. We may even see KeeperDAO frontrunning protocol exploits, returning a portion of the exploited capital back to the compromised project, acting as an insurance fund for the entire DeFi ecosystem.

KeeperDAO is still not void of all competition; there are other projects such as B.Protocol and Archer targeting the same market from the protocol side, with B.Protocol being a lending protocol liquidator and Archer having an interesting and different model in which arbitrageurs collaborate with miners to split the profit of on-chain opportunities.

Still years away, as multi-party computation and zk-SNARK tooling improves, we may see the widespread use of on-chain dark pools and privacy-DEXes that shield trades to prevent frontrunning. Although they do not address DEX arbitrage or liquidations, there are also many infrastructure projects seeking to decrease transaction fee value extraction by miners, reducing the benefit of coordination in KeeperDAO. Examples include proposals for auctions for transaction ordering rights[^8] and MEV-Geth[^9], and the rise in layer 2 roll-ups also fragments availability of arbitrage opportunities.

There is even progress from blockchain consensus innovation. At a fundamental level, MEV exists because traditional consensus mechanisms[^10] rely on electing a leader to publish the next state transition. Since this step is a bottleneck, it gives prospective block-producers time to collect and favorably reorder transactions to capture MEV[^11] in the case that they are elected. Blockchain researcher and Ava Labs founder Emin Gün Sirer has been vocal about this issue and put forward that MEV is not an issue on the Avalanche blockchain, as its underlying namesake Avalanche consensus algorithm is leaderless[^12].

The design space for reducing and capturing MEV is wide and the future of this market is uncertain, but KeeperDAO is nonetheless in a strong position to capture a good portion of value in the medium to long term, and still has use serving as a general protocol-level liquidity underwriter in the worst case. Given that much of the founding team is also behind Ren, it would be interesting to see if there are any future synergies, perhaps expanding KeeperDAO to a cross-chain liquidity pool. Ultimately, KeeperDAO is an extremely promising project still with a lot of room to grow and adapt to an nascent and uncertain market.

[^1]: Dan Robinson and Georgios Konstantopoulos, [“Ethereum is a Dark Forest”](https://medium.com/@danrobinson/ethereum-is-a-dark-forest-ecc5f0505dff)
[^2]: Philip Daian et al., [“Flash Boys 2.0: Frontrunning, Transaction Reordering, and Consensus Instability in Decentralized Exchanges”](https://arxiv.org/abs/1904.05234)
[^3]: Kaihua Qin, Liyi Zhou, and Arthur Gervais, [“Quantifying Blockchain Extractable Value: How dark is the forest?”](https://arxiv.org/abs/2101.05511)
[^4]: From cumulative USD MEV graph published by the Flashbots project, found in KeeperDAO Discord
[^5]: During the recent “DeFi Summer”, we saw for a period miners making more profit off transaction fees than block rewards
[^6]: As of 1/20/2021, from [Dune Analytics KeeperDAO_v2 dashboard](https://explore.duneanalytics.com/public/dashboards/RVyXbw2l5EuqnnDw5tDmbXdW3Pf9bgKgxtZdzXIh)
[^7]: As of 1/20/2021, from [Dune Analytics KeeperDAO_v2 dashboard](https://explore.duneanalytics.com/public/dashboards/RVyXbw2l5EuqnnDw5tDmbXdW3Pf9bgKgxtZdzXIh)
[^8]: Described in the 1/3/2020 ethresear.ch post [“MEV Auction: Auctioning transaction ordering rights as a solution to Miner Extractable Value”](https://ethresear.ch/t/mev-auction-auctioning-transaction-ordering-rights-as-a-solution-to-miner-extractable-value/6788) by karl
[^9]: Described in the 11/1/2020 ethresear.ch post [“Flashbots: Frontrunning the MEV crisis”](https://ethresear.ch/t/flashbots-frontrunning-the-mev-crisis/8251) by thegostep
[^10]: Referring to Nakamoto and practical Byzantine fault tolerant consensus, along with their hybrids and extensions.
[^11]: It is for this reason that MEV is a misnomer, as we would expect to see similar dynamics even in proof-of-stake systems with validators capturing the value.
[^12]: Transactions in Avalanche are gossiped throughout the network and consensus is reached through nodes collectively performing rounds of state queries to other nodes. At each round, each node updates its state to be one consistent with the majority of its state queries. This process results in the network converging to a canonical state over a few rounds. For details, please refer to the original Avalanche paper: Team Rocket et al., [“Scalable and Probabilistic Leaderless BFT Consensus through Metastability”](https://arxiv.org/abs/1906.08936)
